<h2 *ngIf="$dialog_plan_number">天窗修计划详情修改</h2>
<h2 *ngIf="!$dialog_plan_number">天窗修计划详情增加</h2>
<div mat-dialog-content style="font-size: 16px;">
  <form [formGroup]="form" fxLayout="column" (submit)="handle_submit()">
    <div fxLayout="row" fxLayoutAlign="start" fxLayoutGap="10px">
      <mat-form-field>
        <input matInput [matDatepicker]="picker" placeholder="日期" formControlName="date">
        <mat-datepicker-toggle matSuffix [for]="picker" [disabled]="true"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <input matInput formControlName="number" placeholder="天窗修编号" type="number"/>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutAlign="start" fxLayoutGap="10px">
      <mat-form-field>
        <mat-select formControlName="type" placeholder="天窗修类型">
          <mat-option value="">无</mat-option>
          <mat-option value="Ⅱ">Ⅱ 类</mat-option>
          <mat-option value="Ⅰ">Ⅰ 类</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select formControlName="direction" placeholder="行别">
          <mat-option value="上行">上行</mat-option>
          <mat-option value="下行">下行</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxLayout="row"
         fxLayoutAlign="start end"
         fxLayoutGap="10px">
      <mat-form-field>
        <input matInput
               formControlName="start_time"
               placeholder="开始时间"
               type="time">
        <mat-error *ngIf="form.controls['start_time'].hasError('time')">
          时间错误
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input matInput
               formControlName="end_time"
               placeholder="结束时间"
               type="time"
        >
        <mat-error *ngIf="form.controls['end_time'].hasError('time')">
          时间错误
        </mat-error>
      </mat-form-field>
      <mat-checkbox class="checkbox-in-mat-form" [formControl]="form.controls['calc_time']">统计时间</mat-checkbox>
    </div>
    <mat-form-field class="input-80p-width">
      <textarea matInput formControlName="area" placeholder="维修区域" type="text"></textarea>
    </mat-form-field>
  </form>
  <mat-chip-list fxLayout="column">
    <mat-chip
      *ngIf="form.controls['end_time'].hasError('time')"
      color="accent"
      selected="true"
    >
      统计时间时，结束时间不应小于开始时间
    </mat-chip>
    <mat-chip
      *ngIf="form.controls['end_time'].hasError('time')"
      color="accent"
      selected="true"
    >
      统计时间时，结束时间不应小于开始时间
    </mat-chip>
    <mat-chip
      *ngFor="let warn of warns['number']"
      color="accent"
      selected="true"
    >
      {{warn}}
    </mat-chip>
  </mat-chip-list>
</div>
<div mat-dialog-actions>
  <button mat-button [disabled]="form.invalid" (click)="handle_submit()">保存</button>
  <button mat-button (click)="close()">取消</button>
</div>
