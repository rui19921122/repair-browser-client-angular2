<div *ngIf="!(is_login|async)">
  此页面仅登陆用户才可查看
</div>
<div *ngIf="is_login|async" class="container">
  <md-sidenav-container class="navbar-sidenav"
                        [ngStyle]="{'height':page_height+'px'}"
                        #container>
    <app-content style="overflow-y: auto"
                 [height]="page_height"
    >
    </app-content>
    <md-sidenav
      mode="over"
      [opened]="($state|async)?.display_dates_panel||($state|async)?.open_select_panel"
      [disableClose]="true">
      <app-date-card-list
        *ngIf="($state|async)?.display_dates_panel"
        [show_all]="$show_all_dates_on_header"
        [dates]="$repair_plan_and_history_data"
        [map_func]="MapOriginDataToDateCardData"
        (show_all_card_on_header_is_clicked_output)="handle_show_all_clicked($event)"
      >
      </app-date-card-list>
      <div class="sidenav-content"
           fxLayoutAlign="start center"
           fxLayout="column"
           *ngIf="($state|async)?.open_select_panel"
      >
        <form [formGroup]="DatePickerForm">
          <md-input-container class="sidenav-panel"
                              fxLayout
          >
            <input mdInput [mdDatepicker]="start_date"
                   placeholder="选择开始日期"
                   [formControl]="DatePickerForm.controls['start_date']"
            >

            <md-datepicker-toggle mdSuffix [for]="start_date"></md-datepicker-toggle>
          </md-input-container>
          <md-datepicker #start_date></md-datepicker>
          <md-input-container class="sidenav-panel"
                              fxLayout
          >
            <input mdInput [mdDatepicker]="end_date" placeholder="选择结束日期"
                   [formControl]="DatePickerForm.controls['end_date']"
            >
            <md-datepicker-toggle mdSuffix [for]="end_date"></md-datepicker-toggle>
          </md-input-container>
          <md-datepicker #end_date
          >
          </md-datepicker>
        </form>
        <div class="sidenav-panel">
          <button md-raised-button
                  *ngFor="let choice of length_button_choices"
                  (click)="change_form_by_button('length',choice.value)"
          >
            {{choice.text}}
          </button>
        </div>
        <div class="sidenav-panel">
          <button md-raised-button
                  *ngFor="let choice of month_button_choices"
                  (click)="change_form_by_button('month',choice.value)"
          >
            {{choice.text}}
          </button>
        </div>
        <div class="sidenav-panel">
          <button md-raised-button
                  style="background-color: #1565C0;color: white;width: 90%;"
                  (click)="search_for_plan_data.next()"
          >
            搜索路局天窗修计划
          </button>
        </div>
        <div class="sidenav-panel">
          <button md-raised-button
                  style="background-color: #1565C0;color: white;width: 90%;"
                  (click)="search_for_history_data.next()"
          >
            搜索路局天窗修历史计划
          </button>
        </div>
        <div class="sidenav-panel">
          <button md-raised-button
                  style="width: 90%;"
                  (click)="close_slide_bar()"
          >关闭侧边栏
          </button>
        </div>
      </div>
    </md-sidenav>
    <!-- primary content -->
  </md-sidenav-container>
</div>
